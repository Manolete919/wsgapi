<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/template/template.xhtml">
	
	<ui:define name="head">
		<f:event listener="#{collectorIndicadorSerie.inicializar(menuVista.indicador.idIndicador)}" type="preRenderView"></f:event>
	</ui:define>

	<ui:define name="overlay"></ui:define>
	<ui:define name="content">
	<p:growl id="msgs" showDetail="true" />
		
			<p:panel header="Crear Series para un indicador" style="margin-bottom:20px">
				
				<center>
					<h:panelGrid columns="4" cellpadding="5">

						<h:outputLabel value="Usuario"></h:outputLabel>
						<h:outputLabel
							value="#{menuVista.usuario.nombre}"></h:outputLabel>
						<h:outputLabel value="Indicador:"></h:outputLabel>
						<h:outputLabel
							value="#{menuVista.indicador.nombre}"></h:outputLabel>

						<h:outputLabel value="Nombre : *" for="txt_eti_serie"></h:outputLabel>
						<p:inputText id="txt_eti_serie"
							value="#{collectorIndicadorSerie.indicadorSerie.nombre}" requiredMessage="Se requiere un nombre " required="true" />


						<p:commandButton id="btn_resetSerie" value="Resetear"
							type="reset" />
						<p:commandButton id="btn_addSerie" value="Agregar"
							update="indicadorSeries msgs @parent"
							action="#{collectorIndicadorSerie.reinit}">
							<p:collector value="#{collectorIndicadorSerie.indicadorSerie}"
								addTo="#{collectorIndicadorSerie.indicadorSeries}" unique="true" />
						</p:commandButton>
					</h:panelGrid>
			</center>
			</p:panel>
			<p:outputPanel id="indicadorSeries">
				<p:dataTable value="#{collectorIndicadorSerie.indicadorSeries}" emptyMessage="No hay datos agregados" var="indicadorSerie" id="pSeriesTable">

					<p:column headerText="Nombre">
						<h:outputText value="#{indicadorSerie.nombre}" />
					</p:column>

					<p:column headerText="Accion">
						<p:commandLink value="Quitar" update=":form:indicadorSeries"
							process=":form:indicadorSeries">
							<p:collector value="#{indicadorSerie}"
								removeFrom="#{collectorIndicadorSerie.indicadorSeries}" unique="true" />
						</p:commandLink>
					</p:column>
					
					<f:facet name="footer">
						<p:commandButton  disabled="#{collectorIndicadorSerie.indicadorSeries.size()==0}" value="Guardar" actionListener="#{collectorIndicadorSerie.guardarIndicadorSeries}"/>
					</f:facet>

				</p:dataTable>
			</p:outputPanel>
		
		
	</ui:define>

</ui:composition>